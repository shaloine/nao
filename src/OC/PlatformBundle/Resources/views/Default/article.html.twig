{# src/OC/PlatformBundle/Resources/views/Default/article.html.twig #}
{% extends "OCPlatformBundle::layout.html.twig" %}


{% block body %}

	
	<h3>{{ article.title }}</h3>
	{% if article.articlePicture is not null %}
		<img src="{{  asset('uploads/articlesPictures/'~article.articlePicture.path) }}" alt="{{ article.articlePicture.alt }}"/>
	{% endif %}
	<p>{{ article.datePost|date('d/m/Y H:i') }}</p>
	<p>{{ article.content|raw }}</p>

	{% if is_granted('ROLE_USER') %}
		<div>
			{{ form_start(form) }}

			{{ form_errors(form) }}

			<div class="form-group">
				{{ form_label(form.content) }}
				{{ form_errors(form.content) }}
				{{ form_widget(form.content, {'attr': {'class': 'form-control'}}) }}
			</div>

			<input type="submit" value="enregistrer" class="btn  btn-default">

			{{ form_rest(form) }}

			{{ form_end(form) }}
		</div>
	{% else %}
		<p><a href="{{ path('fos_user_security_login') }}" >Connectez-vous</a> ou <a href="{{ path('fos_user_registration_register')}}">inscrivez-vous</a> pour poster un commentaire</p>
	{% endif %}

	{% if comments is not empty %}
		<h4>Commentaires</h4>
		{% for comment in comments %}
			<div>
				<p>{{ comment.user.username }}</p>
				<p>{{ comment.datePost|date('d/m/Y H:i') }}</p>
				<p>{{ comment.content }}</p>
				<p><a href="{{ path('oc_platform_signalComment', { 'id': comment.id })}}">signaler</a></p>
			</div>
		{% endfor %}
	{% endif %}

{% endblock %}



